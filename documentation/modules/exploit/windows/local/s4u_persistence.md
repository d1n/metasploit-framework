## Windows Manage User Level Persistent Payload Installer

Creates a scheduled task that will run using 
service-for-user (S4U). This allows the scheduled task to 
run even as an unprivileged user that is not logged into the 
device. This will result in lower security context, allowing 
access to local resources only. The module requires 'Logon 
as a batch job' permissions (SeBatchLogonRight).


## Module Name
exploit/windows/local/s4u_persistence

## Authors
* Thomas McCarthy "smilingraccoon" <smilingraccoon[at]gmail.com>
* Brandon McCann "zeknox" <bmccann[at]accuvant.com>


## References
* http://www.pentestgeek.com/2013/02/11/scheduled-tasks-with-s4u-and-on-demand-persistence/
* http://www.scriptjunkie.us/2013/01/running-code-from-a-non-elevated-account-at-any-time/



## Targets
* Windows


## Platforms
win

## Reliability
[Excellent](https://github.com/rapid7/metasploit-framework/wiki/Exploit-Ranking)

## Demo

```
msf > use exploit/windows/local/s4u_persistence
msf exploit(s4u_persistence) > show targets
   ... a list of targets ...
msf exploit(s4u_persistence) > set TARGET <target-id>
msf exploit(s4u_persistence) > show options
   ... show and set options ...
msf exploit(s4u_persistence) > run
```
    
    