## Microsoft SQL Server Database Link Crawling Command Execution

This module can be used to crawl MS SQL Server database 
links and deploy Metasploit payloads through links 
configured with sysadmin privileges using a valid SQL Server 
Login. If you are attempting to obtain multiple reverse 
shells using this module we recommend setting the 
"DisablePayloadHandler" advanced option to "true", and 
setting up a exploit/multi/handler to run in the background 
as a job to support multiple incoming shells. If you are 
interested in deploying payloads to spefic servers this 
module also supports that functionality via the "DEPLOYLIST" 
option. Currently, the module is capable of delivering 
payloads to both 32bit and 64bit Windows systems via 
powershell memory injection methods based on Matthew 
Graeber's work. As a result, the target server must have 
powershell installed. By default, all of the crawl 
information is saved to a CSV formatted log file and MSF 
loot so that the tool can also be used for auditing without 
deploying payloads.


## Module Name
exploit/windows/mssql/mssql_linkcrawler

## Authors
* Antti Rantasaari <antti.rantasaari[at]netspi.com>
* Scott Sutherland "nullbind" <scott.sutherland[at]netspi.com>


## References
* http://www.slideshare.net/nullbind/sql-server-exploitation-escalation-pilfering-appsec-usa-2012
* http://msdn.microsoft.com/en-us/library/ms188279.aspx
* http://www.exploit-monday.com/2011_10_16_archive.html



## Targets
* Automatic


## Platforms
* win

## Reliability
[Great](https://github.com/rapid7/metasploit-framework/wiki/Exploit-Ranking)

## Demo

```
msf > use exploit/windows/mssql/mssql_linkcrawler
msf exploit(mssql_linkcrawler) > show targets
   ... a list of targets ...
msf exploit(mssql_linkcrawler) > set TARGET <target-id>
msf exploit(mssql_linkcrawler) > show options
   ... show and set options ...
msf exploit(mssql_linkcrawler) > run
```
    
    